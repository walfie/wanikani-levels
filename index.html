<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>WaniKani Levels</title>
</head>
<body>
<h1>WaniKani Levels</h1>

<script src="lib.js"></script>
<style>
table {
  border-collapse: collapse;
}

table, th, td {
  border: 1px solid #999;
  padding: 5px;
}
</style>

<textarea id="input" rows="5" cols="60" placeholder="Enter some text with kanji in it"></textarea>
<hr>
<div id="output"></div>

<script>
(function() {

var input = document.querySelector("#input");
var output = document.querySelector("#output");

function elem(tag, text) {
  var e = document.createElement(tag);
  e.innerHTML = text;
  return e;
};

function update() {
  var levels = Array
    .from(getKanjiLevels(input.value))
    .sort(function(a, b) { return a[0] - b[0]; });

  var table = document.createElement('table');
  var header = document.createElement('tr');
  header.appendChild(elem('th','Level'));
  header.appendChild(elem('th','Kanji'));
  table.appendChild(header);

  levels.forEach(function(item) {
    var tr = document.createElement('tr');
    tr.appendChild(elem('td', item[0] || '?'));
    tr.appendChild(elem('td', item[1].join(' ')));
    table.appendChild(tr);
  });

  output.innerHTML = '';
  output.appendChild(table);
};

input.addEventListener('input', update);

}());
</script>

</body>
</html>
